"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[676],{676:function(e,a,s){s.r(a),s.d(a,{default:function(){return p}});var t=s(641),o=s(953),l=s(33),r=s(810),n=s(4335);const i=(0,r.nY)("login",{state:()=>({form:{username:"",password:""},message:"",loginError:!1,email:""}),actions:{async sqlLogin(){try{const e=await n.A.post("/api/api/sqlLogin",{username:this.form.username,password:this.form.password});return"SQL 数据库登录成功"===e.data.message?(this.loginError=!1,this.message=e.data.message,this.email=e.data.email,localStorage.setItem("email",this.email),localStorage.setItem("username",e.data.username),localStorage.setItem("id",e.data.id),!0):(this.loginError=!0,this.message=e.data.message,!1)}catch(e){return this.message="SQL 登录失败",!1}},async mongoLogin(){try{const e=await n.A.post("/api/api/mongoLogin",{username:this.form.username,password:this.form.password});return this.message=e.data.message,!0}catch(e){return this.message="MongoDB 登录失败",!1}}}}),m={class:"login-container"},u={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",style:{width:"18px",height:"18px","margin-right":"4px"}};var c={__name:"UserLogin",emits:["login-success"],setup(e,{emit:a}){const s=i(),r=a,n=(0,o.KR)(null),c=async()=>{const e=await s.sqlLogin();e&&(r("login-success"),window.location.href="/home")},d=()=>{window.location.href="/api/auth/github"},g=()=>{window.location.href="/register"};return(e,a)=>{const r=(0,t.g2)("el-input"),i=(0,t.g2)("el-form-item"),p=(0,t.g2)("el-button"),h=(0,t.g2)("el-form"),f=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.CE)("div",m,[(0,t.bF)(f,{class:"login-card"},{header:(0,t.k6)((()=>a[2]||(a[2]=[(0,t.Lk)("h2",null,"登录",-1)]))),default:(0,t.k6)((()=>[(0,t.bF)(h,{model:(0,o.R1)(s).form,ref_key:"formRef",ref:n},{default:(0,t.k6)((()=>[(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:(0,o.R1)(s).form.username,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,o.R1)(s).form.username=e),placeholder:"用户名",class:(0,l.C4)({"error-input":(0,o.R1)(s).loginError})},null,8,["modelValue","class"])])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(r,{modelValue:(0,o.R1)(s).form.password,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.R1)(s).form.password=e),placeholder:"密码",type:"password"},null,8,["modelValue"])])),_:1}),(0,t.bF)(i,null,{default:(0,t.k6)((()=>[(0,t.bF)(p,{type:"primary",onClick:c},{default:(0,t.k6)((()=>a[3]||(a[3]=[(0,t.eW)("登录")]))),_:1}),(0,t.bF)(p,{onClick:g},{default:(0,t.k6)((()=>a[4]||(a[4]=[(0,t.eW)("现在去注册")]))),_:1}),(0,t.bF)(p,{id:"githubLoginBtn",onClick:d},{default:(0,t.k6)((()=>[((0,t.uX)(),(0,t.CE)("svg",u,a[5]||(a[5]=[(0,t.Lk)("path",{d:"M24 0c-13.2 0-24 10.8-24 24s10.8 24 24 24 24-10.8 24-24-10.8-24-24-24zm0 44c-11 0-20-9-20-20 0-3.3.9-6.4 2.5-9.1-.2-.6-.2-1.2-.2-1.8 0-4.7 2.9-8.6 7-10.5-1.3.4-2.7.6-4.1.6-2.5 0-4.9-1-6.7-2.6 1.4.2 2.7.6 4 1-3.3-3.2-8-5.2-12.8-5.2-1.3 0-2.5.1-3.8.3 2.7 1.7 5.8 2.7 9 3.2-2.5-1.7-4-4.7-4-7.7 0-1.7.5-3.2 1.3-4.4-2.7.7-5.2-1.3-5.2-6 0-1.3.4-2.5 1-3.4 1.7 2.1 4.1 3.6 6.8 3.7-1.6 1.3-3.4 2-5.3 2.4.5-2.2 1.6-4.5 3-5.9-1.4.4-3.1.6-4.8.6-1.3 0-2.5-.1-3.8-.3 2.5 1.6 5.4 2.7 8.4 2.7 10 0 15.6-8.4 15.6-15.6 0-2.4-.1-4.7-.4-7 1.1.8 2.3 1.3 3.6 1.3 2.2 0 4.4-.6 6.2-1.6-1.1 2-3.4 3.4-6.1 4.3 1.9-.2 3.7-.8 5.2-1.6-1.3 2-2.9 3.9-4.8 5 1.6 1.3 3.5 2.1 5.5 2.1 12 0 18-10 18-18 0-3.5-.8-6.7-2.2-9.6 1.5-.3 2.9-.9 4.1-1.6-1.4 1.7-3.1 3-5 3.8 1.3-1.1 2.7-2.4 4-3.8-1 1.7-2.4 3.3-4 4.8 1.3-.1 2.6-.4 3.8-.8-1.1 1.7-2.8 3-4.7 3.8 1.1-.9 2-2 2.8-3.1-.9 1.2-2 2.2-3.2 3.1z"},null,-1)]))),a[6]||(a[6]=(0,t.eW)(" 使用 GitHub 登录 "))])),_:1})])),_:1})])),_:1},8,["model"]),(0,t.Lk)("p",null,(0,l.v_)((0,o.R1)(s).message),1)])),_:1}),a[7]||(a[7]=(0,t.Lk)("img",{src:"/background.jpg",alt:"背景图",class:"bg-image"},null,-1))])}}},d=s(6262);const g=(0,d.A)(c,[["__scopeId","data-v-46ccb386"]]);var p=g}}]);
//# sourceMappingURL=676.d14799af.js.map